<!-- Breadcrumb -->
<ol class="breadcrumb">
  <li class="breadcrumb-item active" aria-current="page">出退勤時刻</li>
</ol>

<!-- Flash message -->
<%= render "layouts/flash_message" %>

<!-- Top link -->
<section class="top-link">
</section>

<!-- Search form -->
<section class="search-form">
  <%= search_form_for(@q, url: working_records_path, html: { method: :get }) do |f| %>

    <div class="form-group">
      <!--    # TODO: set store-->
      <%= f.label :店舗 %>
      <%= f.collection_select :store_id_eq, Store.all, :id, :name, {prompt: '選択してください'}, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :名前 %>
      <%= f.text_field :user_full_name_cont, class: "form-control" %>
    </div>

    <div class="form-group two-date-field">
      <%= f.label :期間 %>
      <%= f.date_field :action_time_gteq, class: "form-control" %>
      <span>~</span>
      <%= f.date_field :action_time_lteq_end_of_day, class: "form-control" %>
    </div>

    <div class="actions">
      <%= button_tag type: :submit, name: nil, class: "btn btn-icon btn-outline-primary" do %>
        <i class="material-icons">search</i>
        <span>検索</span>
      <% end %>
    </div>

  <% end %>
</section>

<!-- Pagination -->
<section class="page-pagination">
  <%= paginate @working_records %>
</section>

<table class="table table-list ">
  <thead>
    <tr>
      <th>店舗</th>
      <th>ユーザーID</th>
      <th>名前</th>
      <th>日付</th>
      <th>出勤区別</th>
      <th>時刻</th>
    </tr>
  </thead>
  <tbody>
    <% @working_records.each do |working_record| %>
      <tr>
        <td><%= working_record.store.name %> </td>
        <td><%= working_record.user.staff_id %> </td>
        <td><%= working_record.user.full_name %> </td>
        <td><%= working_record.action_time.to_date %> </td>
        <td><%= working_record.record_action.name %> </td>
        <td><%= working_record.action_time.strftime("%I:%M") %> </td>
      </tr>
    <% end %>
  </tbody>
</table>
